---
- name: "Build a container with ansible"   // نضع اسم لملف  docker-compose 
  hosts: localhost   // وين رح تشغل الملف (محلي ) 
  connection: local
  tasks:     //بداية المهام 
    - name: stop current running container   // المهمة الاولى اسم 
      command: docker stop web-container   // التعليمة 
      ignore_errors: yes    // تجاهل الخطأ يلي رح يطلع 

    - name: remove stopped container    / المهمة الثانية 
      command: docker rm web-container
      ignore_errors: yes

    - name: remove comingsoon-image   // الثالثة 
      command: docker rmi triple3a/comingsoon-page
      ignore_errors: yes

    - name: build docker image using the Dockerfile   // الرابعة 
      command: docker build -t triple3a/comingsoon-page .

    - name: Push Image to dockerhub    // الخامسة 
      command: docker push triple3a/comingsoon-page

    - name: run container    // السادسة 
      command: docker run -d --name web-container -p 5000:80 triple3a/comingsoon-page
